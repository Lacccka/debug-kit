# Debug-Kit

[![CI](https://github.com/Lacccka/debug-kit/actions/workflows/ci.yml/badge.svg)](https://github.com/Lacccka/debug-kit/actions/workflows/ci.yml)

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ—Ç–ª–∞–¥–∫–∏.\
–ú–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ –ª—é–±–æ–º—É —Å–∞–π—Ç—É (—Å–≤–æ–π, —á—É–∂–æ–π, —Ç–µ—Å—Ç–æ–≤—ã–π).

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–ò–∑ npm:

```bash
npm install debug-kit
```

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```bash
git clone https://github.com/your-org/debug-kit.git
cd debug-kit
npm install
```

## üîß –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç—ã

```bash
npm run build
npm test
npm run size
```

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É

–ë–∞–Ω–¥–ª—ã:

-   `dist/debugkit.iife.js` ‚Äî –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ `<script>` (–≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `DebugKit`).
-   `dist/debugkit.esm.js` ‚Äî –¥–ª—è –ø—Ä—è–º–æ–≥–æ `import`.

### ESM

```js
import DebugKit from "debug-kit";

DebugKit.enableTool("guard");
```

### Script

```html
<script src="node_modules/debug-kit/dist/debugkit.iife.js"></script>
<script>
    DebugKit.enableTool("guard");
</script>
```

## üö® Lighthouse endpoint

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç Lighthouse –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ `/lighthouse` –≤ —Ç–µ–∫—É—â–µ–º
origin.\
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–µ–±–æ–ª—å—à–æ–π Node-–±—ç–∫–µ–Ω–¥ —Å Lighthouse CLI, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å
—ç—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –ª–æ–∫–∞–ª—å–Ω–æ:

```js
import express from "express";
import { execFile } from "child_process";

const app = express();

app.get("/lighthouse", (req, res) => {
    const { url, strategy = "mobile" } = req.query;
    execFile(
        "npx",
        ["lighthouse", url, "--output=json", `--preset=${strategy}`],
        { maxBuffer: 1024 * 1024 },
        (err, stdout) => {
            if (err) {
                res.status(500).json({ error: "Lighthouse failed" });
                return;
            }
            res.json(JSON.parse(stdout));
        }
    );
});

app.listen(3000);
```

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:

```bash
npm install express
npx lighthouse --help # —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Lighthouse CLI –¥–æ—Å—Ç—É–ø–µ–Ω
node server.js
```

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Debug‚ÄëKit –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–º —Å–∞–π—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∞ CORS –±—Ä–∞—É–∑–µ—Ä–∞
–º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ `/lighthouse`.\
–†–∞–∑–º–µ—Å—Ç–∏—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç –Ω–∞ —Ç–æ–º –∂–µ origin –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ CORS.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

-   –†–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –Ω–∞ **desktop** –∏ **mobile**.
-   –ü–∞–Ω–µ–ª—å –∑–∞–ø—É—Å–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (Alt+D –∏–ª–∏ –ø–ª–∞–≤–∞—é—â–∏–π —Ç–æ–≥–≥–ª–µ—Ä).
-   –ï–¥–∏–Ω—ã–π —à–∞–±–ª–æ–Ω HUD: drag, snap –∫ –∫—Ä–∞—è–º, —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –≤ ¬´–ø–∏–ª—é–ª—é¬ª,
    —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏.
-   –õ—ë–≥–∫–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–æ–≤—ã–º–∏ –º–æ–¥—É–ª—è–º–∏.
-   Shadow DOM --- –∏–∑–æ–ª—è—Ü–∏—è —Å—Ç–∏–ª–µ–π.
-   –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `localStorage`.

---

## üì¶ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –Ø–¥—Ä–æ

-   –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ Shadow DOM (`#debugkit-host`).
-   –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
    -   —Ä–µ–µ—Å—Ç—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤,
    -   –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ,
    -   —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è,
    -   –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–ª—É—à–∞—Ç–µ–ª–∏ (`resize`, `scroll`, `visualViewport`).
-   API:
    `js     DebugKit.registerTool({id, name, icon, init, destroy, ...});     DebugKit.enableTool(id);     DebugKit.disableTool(id);     DebugKit.toggleTool(id);     DebugKit.getState(id);     DebugKit.loadPlugin("https://cdn.example.com/my-tool.js");     DebugKit.bus.emit(event, data);     DebugKit.bus.on(event, fn);`

### –ü–∞–Ω–µ–ª—å (Launcher)

-   –í—ã–µ–∑–∂–∞—é—â–µ–µ –æ–∫–Ω–æ —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏.
-   –®–∞–ø–∫–∞: –∑–∞–≥–æ–ª–æ–≤–æ–∫ + –ø–æ–∏—Å–∫.
-   –°–µ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ —Å —Ç—É–º–±–ª–µ—Ä–∞–º–∏ on/off.
-   –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å–±—Ä–æ—Å, —Ç–µ–º–∞ light/dark/auto, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
    –ø–∞–Ω–µ–ª–∏, —ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç).

### HUD

-   –ö–∞—Ä—Ç–æ—á–∫–∞ 240--320 px.
-   –®–∞–ø–∫–∞: –∏–∫–æ–Ω–∫–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ, drag-handle, –∫–Ω–æ–ø–∫–∏
    (minimize/pin/settings/close).
-   –ü–æ–≤–µ–¥–µ–Ω–∏–µ:
    -   draggable –º—ã—à—å—é/—Ç–∞—á–µ–º,
    -   snap –∫ –∫—Ä–∞—è–º,
    -   –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏,
    -   —Å–≤–µ—Ä–Ω—É—Ç—å –≤ ¬´–ø–∏–ª—é–ª—é¬ª,
    -   –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –Ω–∞ –º–æ–±–∏–ª–µ ‚â§‚Öì —ç–∫—Ä–∞–Ω–∞.

### Event bus

-   –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:
    -   `viewport:change` -- –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –æ–∫–Ω–∞ –∏–ª–∏ –º–∞—Å—à—Ç–∞–±–∞.
    -   `zoom:change` -- –∏–∑–º–µ–Ω–µ–Ω–∏–µ `visualViewport.scale`.
    -   `scrollbar:change` -- –ø–æ—è–≤–ª–µ–Ω–∏–µ –∏–ª–∏ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ —Å–∫—Ä–æ–ª–ª–±–∞—Ä–æ–≤.
    -   `theme:change` -- —Å–º–µ–Ω–∞ —Ç–µ–º—ã (—Å–∏—Å—Ç–µ–º–Ω–∞—è –∏–ª–∏ –∏–∑ –ø–∞–Ω–µ–ª–∏).
    -   `panel:lock` -- —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–∞–Ω–µ–ª–∏.
    -   `tool:state`
    -   `registry:change`

---

## üõ† –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (MVP)

-   **Guard** (–≥–æ—Ç–æ–≤–æ)
    -   HUD: `viewport`, `scale`.
    -   –ö–Ω–æ–ø–∫–∞ ¬´Overflow scan¬ª (–ø–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤).
-   **Layout Debug**
    -   CLS, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–≤–∏–≥–æ–≤, –ø–æ–¥—Å–≤–µ—Ç–∫–∞ shift/overflow.
-   **Grid Overlay**
    -   –°–µ—Ç–∫–∞: –∫–æ–ª–æ–Ω–∫–∏, gutter, baseline.
-   **Perf HUD**
    -   FPS, long tasks, JS heap.
-   **Logger**
    -   –û—à–∏–±–∫–∏ (`onerror`, `unhandledrejection`).
    -   –°–µ—Ç—å (fetch/xhr).
-   **Text Tool**
    -   –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä (min/max). –í—ã–±–æ—Ä —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–ª–∏–∫–æ–º. (Edit text with responsive font size; pick target by clicking.)

---

## ‚öôÔ∏è –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

-   –ß–∏—Å—Ç—ã–π JS + CSS, –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
-   Fail-safe: –æ—à–∏–±–∫–∞ –º–æ–¥—É–ª—è –Ω–µ –ª–æ–º–∞–µ—Ç –ø–∞–Ω–µ–ª—å.
-   –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–µ—Ä—Ñ–æ–º–∞–Ω—Å (throttling).
-   –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã (Chrome, Edge, Safari, Firefox).
-   –†–∞–∑–º–µ—Ä —è–¥—Ä–∞ + –±–∞–∑–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π `< 50 KB gz`.

---

## üíæ –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

–í `localStorage` (—Å –∫–ª—é—á–∞–º–∏ `debugkit:v1:*`):

-   –≤–∫–ª—é—á—ë–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã,
-   –ø–æ–∑–∏—Ü–∏–∏ HUD,
-   –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è,
-   —Ç–µ–º–∞ –ø–∞–Ω–µ–ª–∏.

–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏
–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö.

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ –Ω–æ–º–µ—Ä major: –æ–±–Ω–æ–≤–∏—Ç–µ –ø—Ä–µ—Ñ–∏–∫—Å
`ns` –≤ `src/index.js` –∏ –∑–Ω–∞—á–µ–Ω–∏–µ `major` –≤ `src/core/versioning.js`.

---

## üé® UI/UX

-   Shadow DOM --- —Å—Ç–∏–ª–∏ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è —Å —Å–∞–π—Ç–æ–º.
-   –ê–≤—Ç–æ—Ç–µ–º–∞ (light/dark) + —Ä—É—á–Ω–æ–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å.
-   –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏.
-   –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è HUD –≤ ¬´–ø–∏–ª—é–ª—é¬ª.
-   Tooltip –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏.

---

## ‚å®Ô∏è –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ / –∂–µ—Å—Ç—ã

-   Desktop: **Alt+D**.
-   Mobile:
    -   triple-tap (–ø—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª),
    -   long-tap hotspot (8√ó8 px, –ª–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª),
    -   `#debug` –≤ URL.

---

## üîÆ –ë—É–¥—É—â–µ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

-   –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ (JSON).
-   –ü–ª–∞–≥–∏–Ω—ã (–ø–æ–¥–∫–ª—é—á–∞–µ–º—ã–µ –∏–∑ CDN).
-   Inspector (–ø–æ–¥—Å–≤–µ—Ç–∫–∞ DOM –ø–æ–¥ –∫—É—Ä—Å–æ—Ä–æ–º).
-   –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ª–æ–∫–∞–ª—å–Ω—ã–º Lighthouse.

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞:

-   Desktop: Chrome, Firefox, Safari.
-   Mobile: Chrome/Android, Safari/iOS.

–ü—Ä–æ–≤–µ—Ä–∫–∞:

-   –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ö–æ—Ç–∫–µ–µ–≤/–∂–µ—Å—Ç–æ–≤,
-   –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è,
-   —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π HUD,
-   —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –º–æ–¥—É–ª—è,
-   –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞–Ω–µ–ª–∏ –∏ HUD.

---

## ü§ù –í–∫–ª–∞–¥

–û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ issue –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ pull request. –ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –∑–∞–ø—É—Å–∫–∞–π—Ç–µ `npm test`, `npm run build` –∏ `npm run size`. –ü–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–º–∏—Ç–æ–≤ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –≤ –ø–æ–≤–µ–ª–∏—Ç–µ–ª—å–Ω–æ–º –Ω–∞–∫–ª–æ–Ω–µ–Ω–∏–∏.

---
